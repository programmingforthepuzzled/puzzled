{"version":3,"sources":["../../node_modules/regenerator-runtime/runtime.js","ui/alerts.ts","ui/message-view.js","puzzles/base-puzzle-setup.ts","puzzles/crossing-puzzles/common-setup.ts","puzzles/crossing-puzzles/bridge-setup.ts","puzzles/base-animator.ts","puzzles/crossing-puzzles/common-animator.ts","puzzles/crossing-puzzles/bridge-animator.ts","puzzles/crossing-puzzles/river-setup.ts","puzzles/crossing-puzzles/river-animator.ts","puzzles/puzzle-manager.ts","ui/modal-controller.js","main.js"],"names":["MessageVueManager","Vue","el","data","messages","methods","typeToClass","type","clearMessages","splice","length","addMessage","message","push","text","exports","initModal","continueToPuzzle","active","returnToMenu","window","history","back","editor","ace","edit","setTheme","session","setMode","setShowPrintMargin","getSession","setUseWrapMode","setFontSize","puzzles","Map","set","goatCabbageWolf","vampirePriest","soldierBoy","husbandWife","ghoul","currentPuzzle","get","sessionStorage","getItem","modalController","require","tutorialData","runButtonVueManager","runningCode","runUserCode","getAnnotations","annotation","setupCode","Function","Object","keys","__environment__","getValue","values","endCode"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAC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","file":"main.map","sourceRoot":"../src/scripts","sourcesContent":["/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n!(function(global) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  var inModule = typeof module === \"object\";\n  var runtime = global.regeneratorRuntime;\n  if (runtime) {\n    if (inModule) {\n      // If regeneratorRuntime is defined globally and we're in a module,\n      // make the exports object identical to regeneratorRuntime.\n      module.exports = runtime;\n    }\n    // Don't bother evaluating the rest of this file if the runtime was\n    // already defined globally.\n    return;\n  }\n\n  // Define the runtime globally (as expected by generated code) as either\n  // module.exports (if we're in a module) or a new, empty object.\n  runtime = global.regeneratorRuntime = inModule ? module.exports : {};\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  runtime.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunctionPrototype[toStringTagSymbol] =\n    GeneratorFunction.displayName = \"GeneratorFunction\";\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      prototype[method] = function(arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  runtime.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  runtime.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      if (!(toStringTagSymbol in genFun)) {\n        genFun[toStringTagSymbol] = \"GeneratorFunction\";\n      }\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  runtime.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return Promise.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return Promise.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new Promise(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  runtime.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  runtime.async = function(innerFn, outerFn, self, tryLocsList) {\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList)\n    );\n\n    return runtime.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        if (delegate.iterator.return) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  Gp[toStringTagSymbol] = \"Generator\";\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  runtime.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  runtime.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n})(\n  // In sloppy mode, unbound `this` refers to the global object, fallback to\n  // Function constructor if we're in global strict mode. That is sadly a form\n  // of indirect eval which violates Content Security Policy.\n  (function() {\n    return this || (typeof self === \"object\" && self);\n  })() || Function(\"return this\")()\n);\n","export const codeErrorAlert = function() {\n    alert(\"Your code has errors. Fix them before continuing.\"); \n}\n","let MessageVueManager = new Vue({\n    el:\"#vue-app-message-display\",\n    data: {\n        messages: []\n    },\n    methods: {\n        typeToClass: function(type) {\n            return \"has-text-\" + type \n        }\n    }\n})\n\nexport const clearMessages = function() {\n    MessageVueManager.messages.splice(0, MessageVueManager.messages.length)\n}\n\nexport const addMessage = function(message, type='danger') {\n    MessageVueManager.messages.push({text: message, type: type})\n}\n\n\n","function deepClone(obj: object): Object {\n    return JSON.parse(JSON.stringify(obj))\n}\n\nexport abstract class Puzzle {\n\n    addState(status: Status, data?: Object) {\n\n        if (data === undefined) {\n            data = this.stateData\n        }\n\n        this.states.push(new State(deepClone(data), status))\n    }\n\n    abstract get stateData(): Object\n\n    protected constructor(public readonly states: State[], initialStateData: Object) {\n        this.addState(GenericStatus.NoError, initialStateData)\n    }\n\n}\n\nexport class State {\n\n    constructor(public readonly data: Object, public readonly status: Status) { }\n\n}\n\nexport class Status {\n    constructor(public readonly event: GenericEvent | string, public readonly severityLevel: SeverityLevel) { }\n}\n\n// https://basarat.gitbooks.io/typescript/docs/styleguide/styleguide.html#enum\nexport const enum GenericEvent {\n    Success = 'success',\n    None = ''\n}\n\nexport const enum SeverityLevel {\n\n    NoError = 'no_error',\n    NonFatalError = 'non_fatal_error',\n    FatalError = 'fatal_error'\n\n}\n\nexport const GenericStatus = {\n    NoError: new Status(GenericEvent.None, SeverityLevel.NoError),\n    Success: new Status(GenericEvent.Success, SeverityLevel.NoError)\n}\n\n","export enum Side {\n    Left = 'left',\n    Right = 'right'\n}\n\nexport interface Crosser {\n    side: Side\n}\n\n//The syntax for calling this can be made better using an interface\nexport const checkSuccess = function (crossers: ReadonlyArray<Crosser>): boolean {\n\n    //find returns undefined if there are no matches (no crossers on the left side)\n    //! converts undefined to true\n    return !crossers.find(crosser => crosser.side === Side.Left)\n}\n\nexport const crossersOnCorrectSide = function <T extends Crosser>(crossers: T[], correctSide: Side): T | undefined {\n    let result = crossers.find(crosser => { return crosser.side !== correctSide })\n\n    if (result !== undefined) {\n        return result\n    }\n\n    return undefined\n}\n\nexport const switchSides = function (crossers: Crosser[]): void {\n\n    let moveDirection: Side;\n\n    /*\n    This code has the implicit assumption that:\n        1] There is at least 1 moving passenger\n        2] All moving passengers are on the same side\n    */\n\n    if (crossers[0].side === Side.Left) {\n        moveDirection = Side.Right\n    } else {\n        moveDirection = Side.Left\n    }\n\n    crossers.map(crosser => crosser.side = moveDirection)\n\n}","/*\nPotential TODO - create a sub folders called 'bridge puzzles' and 'river puzzles' and put this under 'bridge puzzles'\nCommon classes can be extracted into the 'crossing-puzzles', which contains 'bridge puzzles' and 'river puzzles'\n*/\n/*\nThis is a barebones implementation of the ghoul puzzle.\nIf similar puzzles are implemented in the future, then this framework can be fleshed out.\n*/\n\nimport { Puzzle, State, Status, GenericStatus, SeverityLevel } from '../base-puzzle-setup'\nimport { Side, Crosser, crossersOnCorrectSide, switchSides, checkSuccess } from './common-setup'\n\n\nclass GhoulPuzzle extends Puzzle {\n\n    get stateData(): GhoulStateData {\n        return new GhoulStateData(this.adventurers, this.timePassed, this.currentSide)\n    }\n\n    public get outOfTime(): boolean {\n\n        if (puzzle.timePassed > puzzle.timeLimit) {\n            return true\n        }\n\n        return false\n    }\n\n    constructor(public readonly adventurers: Adventurer[], public timePassed = 0, public readonly timeLimit = 17, public currentSide = Side.Left, public readonly states: GhoulState[] = []) {\n        super(states, new GhoulStateData(adventurers, timePassed, null))\n    }\n\n}\n\nexport class GhoulState extends State {\n\n    constructor(public readonly data: GhoulStateData, public readonly status: Status) {\n        super(data, status)\n    }\n\n}\n\nclass GhoulStateData {\n\n    constructor(public readonly adventurers: Adventurer[], public readonly timePassed: number, public readonly moveDirection: Side | null) { }\n\n}\n\nclass Adventurer implements Crosser {\n    constructor(public readonly name: string, public readonly timeToCross: number, public side = Side.Left, public hasTorch: boolean = false) { }\n}\n\nexport const GhoulStatus = {\n    SuccessStatus: new Status('Success - Everyone crossed the bridge.', SeverityLevel.NoError)\n}\n\n\nexport const crossBridge = function (...adventurers: Adventurer[]) {\n\n    if (puzzle.outOfTime) {\n        return\n    }\n\n    let preCrossingStatus = preCrossingErrors(adventurers)\n    if (preCrossingStatus !== null) {\n        puzzle.addState(preCrossingStatus)\n        return\n    }\n\n    switchSides(adventurers)\n\n    puzzle.currentSide = adventurers[0].side\n\n    puzzle.timePassed += Math.max(...adventurers.map(adventurer => adventurer.timeToCross))\n\n    if (puzzle.outOfTime) {\n        puzzle.addState(new Status('Time limit exceeded', SeverityLevel.FatalError))\n    } else if (checkSuccess(puzzle.adventurers)) {\n        puzzle.addState(GhoulStatus.SuccessStatus)\n    } else {\n        puzzle.addState(GenericStatus.NoError)\n    }\n}\n\nexport const giveTorch = function (adventurer: Adventurer) {\n\n    if (puzzle.outOfTime) {\n        return\n    }\n\n    if (adventurer.hasTorch === true) {\n        puzzle.addState(new Status(adventurer.name + ' already has the torch', SeverityLevel.NonFatalError))\n    } else {\n        let [curTorchSide] = puzzle.adventurers.filter(adventurer => adventurer.hasTorch === true).map(adventurer => adventurer.side)\n        let proposedTorchSide = adventurer.side\n\n        if (curTorchSide !== proposedTorchSide) {\n            puzzle.addState(new Status('The torch can only be transferred to adventurers on the same side', SeverityLevel.NonFatalError))\n            return\n        }\n\n        puzzle.adventurers.map(adventurer => adventurer.hasTorch = false)\n        adventurer.hasTorch = true\n        puzzle.addState(GenericStatus.NoError)\n    }\n}\n\nfunction preCrossingErrors(adventurers: Adventurer[]): Status | null {\n    let misplacedCharacter = crossersOnCorrectSide(adventurers, puzzle.currentSide)\n\n    if (misplacedCharacter !== undefined) {\n        return new Status(misplacedCharacter.name + ' not on correct side', SeverityLevel.NonFatalError)\n    }\n\n    if (adventurers.length > 2) {\n        return new Status('only a max of 2 adventurers can cross the bridge at once', SeverityLevel.NonFatalError)\n    }\n\n    if (adventurers.length === 0) {\n        return new Status('an adventurer is needed to cross the bridge', SeverityLevel.NonFatalError)\n    }\n\n    if (!adventurers.find(adventurer => adventurer.hasTorch)) {\n        return new Status('at least 1 adventurer must have a torch to cross the bridge', SeverityLevel.NonFatalError)\n    }\n\n    return null\n}\n\nexport const initGhoulPuzzle = function (): Adventurer[] {\n\n\n    let Alice = new Adventurer('Alice', 1, Side.Left, true)\n    let Bob = new Adventurer('Bob', 2)\n    let Charlie = new Adventurer('Charlie', 5)\n    let Doris = new Adventurer('Doris', 10)\n\n    let adventurers = [Alice, Bob, Charlie, Doris]\n\n    puzzle = new GhoulPuzzle(adventurers)\n    states = puzzle.states\n\n    return adventurers\n}\n\nlet puzzle: GhoulPuzzle;\nexport var states: GhoulState[]\n\n\n","//This may get changed to an abstract class if the the draw object is common amongst all animators\nexport interface Animator {\n\n    animate(): Promise<void>\n\n}\n\nexport const createDraw = function (): svgjs.Doc {\n    let id = 'animation-container'\n    let animationContainer = document.getElementById(id)\n    animationContainer!.style.background = \"\"\n    while (animationContainer!.firstChild) {\n        animationContainer!.removeChild(animationContainer!.firstChild!)\n    }\n    //@ts-ignore\n    return SVG(id)\n}","import { Crosser, Side } from './common-setup'\n\nexport const sortIntoLeftAndRightSides = function (crossers: ReadonlyArray<Crosser>): ReadonlyArray<ReadonlyArray<number>> {\n\n    function sortIntoSide(crossers: ReadonlyArray<Crosser>, side: Side): number[] {\n        return crossers.filter(crosser => crosser.side == side).map(crosser => crossers.indexOf(crosser))\n    }\n\n    return [sortIntoSide(crossers, Side.Left), sortIntoSide(crossers, Side.Right)]\n\n}\n\nexport const getMovingCrossers = function (currentCrossers: ReadonlyArray<Crosser>, prevCrossers: ReadonlyArray<Crosser>): ReadonlyArray<number> {\n\n    return currentCrossers.filter(crosser => crosser.side !== prevCrossers[currentCrossers.indexOf(crosser)].side).map(crosser => currentCrossers.indexOf(crosser))\n\n}\n\nexport const getBaseDimensions = function (draw: svgjs.Doc): number[] {\n    let boundingRect = draw.native().getBoundingClientRect()\n    return [boundingRect.width, boundingRect.height]\n}\n\nexport const getCenterY = function (imageHeight: number, totalHeight: number) {\n    return totalHeight / 2 - (imageHeight / 2)\n}\n\nexport async function sleep(milliseconds: number) {\n    return new Promise(resolve => setTimeout(resolve, milliseconds));\n}","import { Animator, createDraw } from \"../base-animator\";\nimport { getBaseDimensions, sleep, sortIntoLeftAndRightSides, getMovingCrossers, getCenterY } from \"./common-animator\";\nimport { Side } from './common-setup'\nimport { SeverityLevel } from '../base-puzzle-setup'\nimport { states, GhoulState, GhoulStatus } from './bridge-setup'\n\nexport class BridgeAnimator implements Animator {\n\n\tprivate readonly characterSideLength: number\n\tprivate drawings = new Map<number, svgjs.Image>();\n\tprivate readonly fileExtension = '.svg'\n\n\tprivate readonly baseWidth: number;\n\tprivate readonly baseHeight: number;\n\n\tprivate readonly numCharsOnSide = 4;\n\tprivate readonly sideWidth: number;\n\n\tprivate readonly bridgeHeightToWidthRatio = 140 / 512;\n\tprivate readonly bridgeHeight: number;\n\tprivate readonly bridgeYCoord: number;\n\tprivate timePassedText: svgjs.Text;\n\n\tprivate torch: svgjs.Image;\n\tprivate readonly torchHeight: number;\n\n\n\tconstructor(private readonly addMessage: (message: string, type?: string) => void, private readonly specificDir: string, private readonly draw: svgjs.Doc = createDraw()) {\n\t\tthis.draw.clear();\n\n\t\t[this.baseWidth, this.baseHeight] = getBaseDimensions(this.draw)\n\t\tthis.characterSideLength = this.baseWidth / 16\n\t\tthis.sideWidth = this.characterSideLength * this.numCharsOnSide;\n\t\tthis.bridgeHeight = (this.baseWidth - (2 * this.sideWidth)) * this.bridgeHeightToWidthRatio\n\t\tthis.bridgeYCoord = this.baseHeight - this.bridgeHeight\n\t\tthis.timePassedText = this.draw.text(\"Time passed: \" + 0)\n\t\tthis.timePassedText.font({\n\t\t\tfamily: 'Helvetica',\n\t\t\tsize: 30\n\t\t});\n\t\tthis.torchHeight = this.characterSideLength\n\t\tthis.torch = this.createTorch()\n\t}\n\n\tprivate createTorch(): svgjs.Image {\n\t\treturn this.draw.image(this.specificDir + 'torch' + this.fileExtension).size(this.characterSideLength / 2, this.characterSideLength)\n\t}\n\n\tasync animate(): Promise<void> {\n\n\t\tthis.setupBackground()\n\n\t\tfor (let i = 0; i < states[0].data.adventurers.length; i++) {\n\t\t\tlet currentAdventurer = states[0].data.adventurers[i];\n\t\t\tthis.drawings.set(i, this.draw.image(this.specificDir + currentAdventurer.name + this.fileExtension).size(this.characterSideLength, this.characterSideLength))\n\t\t}\n\n\t\tfor (let state of states) {\n\t\t\tawait this.drawFrame(state);\n\n\t\t\t//0.5 second delay before each frame\n\t\t\tawait sleep(500)\n\t\t}\n\t}\n\n\tprivate async drawFrame(state: GhoulState): Promise<void> {\n\n\t\t//the index of the current state\n\t\tlet i = states.indexOf(state);\n\n\n\t\tlet [leftBankIDs, rightBankIDs] = sortIntoLeftAndRightSides(state.data.adventurers)\n\n\t\tif (i === 0) {\n\t\t\tthis.drawBridgeSide(Side.Left, leftBankIDs);\n\t\t\tthis.drawBridgeSide(Side.Right, rightBankIDs)\n\t\t} else {\n\n\t\t\tlet showSuccess = false;\n\t\t\tlet throwFatalError = false;\n\n\t\t\tif (state.status === GhoulStatus.SuccessStatus) {\n\t\t\t\tshowSuccess = true\n\t\t\t} else if (state.status.severityLevel === SeverityLevel.FatalError) {\n\t\t\t\tthrowFatalError = true\n\t\t\t} else if (state.status.severityLevel === SeverityLevel.NonFatalError) {\n\t\t\t\tthis.addMessage('Warning: ' + state.status.event, 'warning')\n\t\t\t}\n\n\t\t\t//Get move direction\n\t\t\tlet moveDirection = state.data.moveDirection\n\n\t\t\tif (moveDirection === Side.Left) {\n\t\t\t\tthis.drawBridgeSide(Side.Right, rightBankIDs)\n\t\t\t} else {\n\t\t\t\tthis.drawBridgeSide(Side.Left, leftBankIDs)\n\t\t\t}\n\n\t\t\tlet prevState = states[i - 1]\n\n\t\t\tlet movingPassengerIDs: ReadonlyArray<number> = getMovingCrossers(state.data.adventurers, prevState.data.adventurers)\n\n\t\t\tawait this.animateCrossing(movingPassengerIDs, moveDirection, state);\n\n\t\t\tif (moveDirection === Side.Left) {\n\t\t\t\tthis.drawBridgeSide(Side.Left, leftBankIDs)\n\t\t\t} else {\n\t\t\t\tthis.drawBridgeSide(Side.Right, rightBankIDs)\n\t\t\t}\n\n\t\t\tif (throwFatalError) {\n\t\t\t\tthis.displayFatalError(state.status.event)\n\t\t\t} else if (showSuccess) {\n\t\t\t\tthis.addMessage(state.status.event, 'success')\n\t\t\t}\n\t\t}\n\n\t\tthis.updateTimePassed(state.data.timePassed)\n\t\tthis.updateTorch(state)\n\n\t}\n\n\tprivate displayFatalError(message: string) {\n\n\t\t//If custom error images are needed then put images in the path represented by \"baseDir + commonDir\"\n\t\t//and go to river-puzzle-setup.ts and change the error codes to the names of the images\n\t\tlet ghostSideLen = this.characterSideLength * 3;\n\t\tthis.draw.image(this.specificDir + 'ghost' + this.fileExtension).size(ghostSideLen, ghostSideLen).move(this.baseWidth / 2 - ghostSideLen / 2, this.bridgeYCoord - ghostSideLen - ghostSideLen / 2);\n\n\t\tthis.addMessage(\"Error: \" + message)\n\t}\n\n\tprivate updateTimePassed(timePassed: number) {\n\t\tthis.timePassedText.text(\"Time Passed: \" + timePassed)\n\t}\n\n\tprivate updateTorch(state: GhoulState) {\n\n\t\tlet [adventurerName] = state.data.adventurers.filter(adventurer => adventurer.hasTorch).map(adventurer => adventurer.name)\n\t\tlet [adventurerID] = state.data.adventurers.filter(adventurer => adventurer.name === adventurerName).map(adventurer => state.data.adventurers.indexOf(adventurer))\n\n\t\tlet image = this.drawings.get(adventurerID)\n\t\tthis.moveTorch(image!)\n\t}\n\n\tprivate moveTorch(image: svgjs.Image) {\n\t\tthis.torch.move(image!.x() + this.characterSideLength / 4, this.bridgeYCoord - this.characterSideLength - this.torchHeight)\n\t}\n\n\tprivate async animateCrossing(IDs: ReadonlyArray<number>, moveDirection: Side | null, state: GhoulState) {\n\t\tconst animationTime = 1200;\n\n\t\tif (moveDirection === null) {\n\t\t\tthrow \"Internal Error - moveDirection cannot be null. Report this to the developer.\"\n\t\t}\n\n\t\tif (IDs.length === 0) {\n\t\t\treturn\n\t\t}\n\n\t\tlet movingChars = this.draw.group()\n\n\t\tlet increment = this.characterSideLength\n\t\tlet startXCoord = this.sideWidth\n\t\tlet endXCoord = this.baseWidth - this.sideWidth\n\n\t\tif (moveDirection === Side.Left) {\n\t\t\tincrement *= -1\n\t\t\tstartXCoord = this.baseWidth - this.sideWidth\n\t\t\tendXCoord = this.sideWidth\n\t\t}\n\n\t\tlet xCoord = startXCoord\n\t\tlet xShift = endXCoord - startXCoord\n\n\t\tfor (const id of IDs) {\n\t\t\tlet currentDrawing = this.drawings.get(id);\n\t\t\tcurrentDrawing!.move(xCoord, this.bridgeYCoord - this.characterSideLength);\n\t\t\tmovingChars.add(currentDrawing!);\n\t\t\tif (state.data.adventurers[id].hasTorch) {\n\t\t\t\tthis.moveTorch(currentDrawing!)\n\t\t\t\tmovingChars.add(this.torch)\n\t\t\t}\n\t\t\txCoord += increment\n\t\t}\n\n\t\tmovingChars.animate(animationTime, '-', 0).move(xShift, 0);\n\t\tawait sleep(animationTime);\n\t\tmovingChars.remove();\n\n\t\tfor (const id of IDs) {\n\t\t\tthis.drawings.set(id, this.draw.image(this.specificDir + states[0].data.adventurers[id].name + this.fileExtension).size(this.characterSideLength, this.characterSideLength))\n\t\t}\n\n\t\tthis.torch = this.createTorch()\n\t}\n\n\tprivate drawBridgeSide(side: Side, IDs: ReadonlyArray<number>) {\n\n\t\tlet currentCoord: number;\n\t\tlet increment = this.characterSideLength;\n\n\t\tif (side === Side.Left) {\n\t\t\tcurrentCoord = 0;\n\t\t} else {\n\t\t\tcurrentCoord = this.baseWidth;\n\t\t\t//check if this works w/ pass by ref or value\n\t\t\tincrement *= -1\n\t\t\tcurrentCoord += increment\n\t\t}\n\n\t\tfor (let id of IDs) {\n\t\t\tthis.drawings.get(id)!.move(currentCoord, this.bridgeYCoord - this.characterSideLength)\n\t\t\tcurrentCoord += increment;\n\t\t}\n\t}\n\n\tprivate setupBackground() {\n\t\tlet bridgeWidth = this.baseWidth - (2 * this.sideWidth)\n\t\tthis.draw.image(this.specificDir + 'bridge' + this.fileExtension).size(bridgeWidth, this.bridgeHeight).move(this.sideWidth, this.bridgeYCoord)\n\n\t\tlet leftSide = this.draw.rect().size(this.sideWidth, this.bridgeHeight).move(0, this.bridgeYCoord).fill(\"#A9A9A9\")\n\t\tleftSide.clone().move(this.baseWidth - this.sideWidth, this.bridgeYCoord)\n\t}\n}","import { Puzzle, State, Status, GenericStatus, SeverityLevel, GenericEvent } from '../base-puzzle-setup'\nimport { Side, Crosser, checkSuccess, switchSides, crossersOnCorrectSide } from './common-setup'\n\nclass RiverPuzzle extends Puzzle {\n\n    get stateData(): RiverStateData {\n        return new RiverStateData(this.passengers, this.boat)\n    }\n\n    constructor(public readonly passengers: ReadonlyArray<Passenger>, public readonly boat: Boat, public readonly rules: RiverCrossingRule[], public fatalErrorRaised = false, public states: RiverState[] = []) {\n        super(states, new RiverStateData(passengers, boat))\n    }\n\n}\n\nexport class RiverState extends State {\n\n    constructor(public readonly data: RiverStateData, public readonly status: RiverStatus) {\n        super(data, status)\n    }\n}\n\nclass RiverStateData {\n\n    constructor(public readonly passengers: ReadonlyArray<Passenger>, public readonly boat: Boat) { }\n\n}\n\nexport class RiverErrorData {\n    constructor(public readonly oldType: string, public readonly newType: string, public readonly side: Side) { }\n}\n\nexport class RiverStatus extends Status {\n    constructor(public readonly event: GenericEvent | string, public readonly severityLevel: SeverityLevel, public readonly errorData?: RiverErrorData) {\n        super(event, severityLevel)\n    }\n}\n\nexport const RiverStatuses = {\n    SuccessStatus: new Status('Success - Everyone crossed the river.', SeverityLevel.NoError)\n}\n\nclass Boat {\n    constructor(public readonly rowerTypes: ReadonlyArray<String>, public readonly weightLimit: number, public side = Side.Left) { }\n}\n\nexport class Passenger implements Crosser {\n    constructor(public readonly type: string, public readonly weight: number, public side = Side.Left) { }\n}\n\nabstract class RiverCrossingRule {\n    abstract check(puzzle: RiverPuzzle): Status\n}\n\nclass SameSideRule extends RiverCrossingRule {\n\n    constructor(private readonly type1: string, private readonly type2: string, private readonly type3: string) {\n        super();\n    }\n\n    check(puzzle: RiverPuzzle): Status {\n\n        for (let side of Object.values(Side)) {\n\n            const isTypeOnSide = function (passenger: Passenger, side: Side, type: string): boolean {\n                return passenger.side === side && passenger.type === type;\n            };\n\n            const type1_on_side = puzzle.passengers.some(passenger => {\n                return isTypeOnSide(passenger, side, this.type1)\n            });\n\n            const type_2_on_side = puzzle.passengers.some(passenger => {\n                return isTypeOnSide(passenger, side, this.type2)\n            });\n\n            const type_3_on_side = puzzle.passengers.some(passenger => {\n                return isTypeOnSide(passenger, side, this.type3)\n            });\n\n            if (type1_on_side && type_2_on_side && !type_3_on_side) {\n                let message = this.type1 + ' and ' + this.type2 + ' are both on ' + side + ' side without ' + this.type3;\n\n                if (this.type2 === 'apple') {\n                    return new RiverStatus(message, SeverityLevel.FatalError, new RiverErrorData(this.type2, 'apple_eaten', side))\n                } else {\n                    return new RiverStatus(message, SeverityLevel.FatalError, new RiverErrorData(this.type2, 'skull', side))\n                }\n\n                /*\n                if(this.type1 == 'goat') {\n                    return new Status(message, herbivoreCode)\n                } else if (this.type1 === 'wolf') {\n                    return new Status(message, violenceCode)\n                } else {\n                    return new Status(message, unsortedCode)\n                }\n                */\n            }\n        }\n        return GenericStatus.NoError\n    }\n}\n\n\nclass RelativeAmountRule extends RiverCrossingRule {\n\n    constructor(private readonly type1: string, private readonly type2: string) {\n        super();\n    }\n\n\n    check(puzzle: RiverPuzzle): Status {\n        for (let side of Object.values(Side)) {\n            let amount_of_type1_on_side = 0;\n            let amount_of_type2_on_side = 0;\n\n            for (let passenger of puzzle.passengers) {\n                if (passenger.type === this.type1 && passenger.side === side) {\n                    amount_of_type1_on_side++\n                } else if (passenger.type === this.type2 && passenger.side === side) {\n                    amount_of_type2_on_side++\n                }\n            }\n\n            if (amount_of_type1_on_side > amount_of_type2_on_side && amount_of_type2_on_side > 0) {\n                let message = this.type1 + \"s outnumber \" + this.type2 + \"s on the \" + side + \" side\";\n\n                return new RiverStatus(message, SeverityLevel.FatalError, new RiverErrorData(this.type2, 'skull', side))\n\n                /*\n                if(this.type1 === 'vampire') {\n                    return new Status(message, violenceCode)\n                } else {\n                    return new Status(message, unsortedCode)\n                }\n                */\n            }\n        }\n        return GenericStatus.NoError\n    }\n}\n\nexport const moveBoat = function (...passengers: Array<Passenger>) {\n\n    if (puzzle.fatalErrorRaised) {\n        return\n    }\n\n    let preCrossingStatus = preCrossingErrors(passengers)\n    if (preCrossingStatus !== null) {\n        puzzle.addState(preCrossingStatus)\n        return\n    }\n\n    switchSides(passengers)\n\n    puzzle.boat.side = passengers[0].side;\n\n    for (let rule of puzzle.rules) {\n        const postCrossingStatus = rule.check(puzzle);\n        if (postCrossingStatus !== GenericStatus.NoError) {\n            puzzle.fatalErrorRaised = true\n            puzzle.addState(postCrossingStatus)\n            return\n        }\n    }\n\n    if (checkSuccess(puzzle.passengers)) {\n        puzzle.addState(RiverStatuses.SuccessStatus)\n    } else {\n        puzzle.addState(GenericStatus.NoError)\n    }\n}\n\nfunction preCrossingErrors(passengers: Passenger[]): Status | null {\n\n    let rowerOnBoat = false;\n    let totalPassengerWeight = 0;\n\n    for (let passenger of passengers) {\n        totalPassengerWeight += passenger.weight;\n        if (puzzle.boat.rowerTypes.indexOf(passenger.type) > -1) {\n            rowerOnBoat = true\n        }\n        if (passenger.side != puzzle.boat.side) {\n            //addState(puzzle, new Status(passenger.type + ' not on correct side', nonFatalCode));\n            return new Status(passenger.type + ' not on correct side', SeverityLevel.NonFatalError)\n        }\n    }\n\n    let misplacedPassenger = crossersOnCorrectSide(passengers, puzzle.boat.side)\n    if (misplacedPassenger !== undefined) {\n        return new Status(misplacedPassenger.type + ' not on correct side', SeverityLevel.NonFatalError)\n    }\n\n    if (totalPassengerWeight > puzzle.boat.weightLimit) {\n        //addState(puzzle, new Status('boat weight limit exceeded', nonFatalCode));\n        return new Status('boat weight limit exceeded', SeverityLevel.NonFatalError)\n    }\n\n    if (!rowerOnBoat) {\n        //addState(puzzle, new Status('no rower on boat', nonFatalCode));\n        return new Status('no rower on boat', SeverityLevel.NonFatalError)\n    }\n\n    return null\n}\n\nexport const initGoatPuzzle = function (): ReadonlyArray<Passenger> {\n\n    const boat = new Boat(['farmer'], 2);\n    const passengers = [new Passenger(\"goat\", 1), new Passenger(\"apple\", 1), new Passenger(\"wolf\", 1), new Passenger(\"farmer\", 1)];\n    const rules = [new SameSideRule('wolf', 'goat', 'farmer'), new SameSideRule('goat', 'apple', 'farmer')];\n    puzzle = new RiverPuzzle(passengers, boat, rules)\n    states = puzzle.states\n\n    return puzzle.passengers\n};\n\nexport const initVampirePuzzle = function (): ReadonlyArray<ReadonlyArray<Passenger>> {\n\n    const boat = new Boat([\"vampire\", \"priest\"], 2);\n\n    const passengers = [];\n    const vampires = [];\n    const priests = [];\n\n    for (let i = 0; i < 3; i++) {\n        vampires.push(new Passenger(\"vampire\", 1))\n    }\n\n    passengers.push(...vampires);\n\n    for (let i = 0; i < 3; i++) {\n        priests.push(new Passenger(\"priest\", 1))\n    }\n\n    passengers.push(...priests);\n\n    const rules = [new RelativeAmountRule(\"vampire\", \"priest\")];\n    puzzle = new RiverPuzzle(passengers, boat, rules);\n    states = puzzle.states\n\n    return [vampires, priests]\n};\n\n\nexport const initSoldierPuzzle = function (): ReadonlyArray<ReadonlyArray<Passenger>> {\n\n    const boat = new Boat([\"soldier\", \"boy\"], 3);\n\n    const passengers = [];\n    const soldiers = [];\n    const boys = [];\n\n    for (let i = 0; i < 6; i++) {\n        soldiers.push(new Passenger(\"soldier\", 2))\n    }\n\n    passengers.push(...soldiers);\n\n    for (let i = 0; i < 2; i++) {\n        boys.push(new Passenger(\"boy\", 1))\n    }\n\n    passengers.push(...boys);\n\n    const rules: RiverCrossingRule[] = [];\n    puzzle = new RiverPuzzle(passengers, boat, rules);\n    states = puzzle.states\n\n\n    return [soldiers, boys]\n\n};\n\nexport const initHusbandPuzzle = function (): ReadonlyArray<Passenger> {\n\n    const boat = new Boat([\"Bob\", \"Bob_Wife\", \"Charlie\", \"Charlie_Wife\"], 2);\n    const passengers = [new Passenger(\"Bob\", 1), new Passenger(\"Bob_Wife\", 1), new Passenger(\"Charlie\", 1), new Passenger(\"Charlie_Wife\", 1)];\n    const rules = [new SameSideRule('Bob_Wife', 'Charlie', 'Bob'), new SameSideRule('Charlie_Wife', 'Bob', 'Charlie')];\n    puzzle = new RiverPuzzle(passengers, boat, rules);\n    states = puzzle.states\n\n    return puzzle.passengers\n\n};\n\nlet puzzle: RiverPuzzle;\nexport var states: RiverState[]\n//export var states = puzzle.states\n","import { SeverityLevel } from '../base-puzzle-setup'\nimport { Animator, createDraw } from '../base-animator'\nimport { states, RiverState, RiverStatuses, Passenger, RiverErrorData } from './river-setup'\nimport { sortIntoLeftAndRightSides, getMovingCrossers, getBaseDimensions, sleep, getCenterY } from './common-animator';\nimport { Side } from './common-setup';\n\n//let states: State[]\n\n/*\n//TODO - avoid having to repeat directory for assets\nlet baseDir = './assets/river-crossing/';\nlet commonDir = 'common/';\nlet specificDir: string\n*/\n\n\nlet grassColor = \"#80FF72\";\nlet waterColor = \"#7EE8FA\";\n\n//File extension for images\nconst extension = '.svg';\n\nconst drawings = new Map<number, svgjs.Image>();\n\n//\"animation-container\" is the id of the div that contains svg\n//SVG() is a method supplied by svg.js\n//Normally SVG is undefined - but in reality, it isn't because it's supplied by an external script tag\n//@ts-ignore\n//let draw: svgjs.Doc = SVG('animation-container')\n\nlet boat: svgjs.Image\nlet boatSideLength: number\nlet boatSideLengthInCharacters = 2;\nlet boatYCoord: number\n\nlet maxCharactersInColumn = 4;\nlet maxColumns = 2;\nconst gap = 10;\nlet characterSideLength: number\nlet baseHeight: number\nlet baseWidth: number\nlet riverBankWidth: number\n\nlet leftBankXCoord: number\nlet rightBankXCoord: number\n\nlet animationTime = 1200;\n\n\n//let addMessage: (message: string, type?: string) => void\n\nexport class RiverAnimator implements Animator {\n\n\tprivate readonly baseDir = './assets/river-crossing/';\n\tprivate readonly commonDir = 'common/';\n\t//private readonly draw: svgjs.Doc = createDraw()\n\n\tconstructor(private readonly addMessage: (message: string, type?: string) => void, private readonly specificDir: string, private readonly draw: svgjs.Doc = createDraw()) {\n\t\t//Reset SVG - removes all child elements\n\t\tthis.draw.clear();\n\n\t\t//Reset the drawing pool\n\t\tdrawings.clear();\n\t}\n\n\tpublic async animate(): Promise<void> {\n\n\t\tthis.calculateDimensions();\n\n\t\tthis.initBackground();\n\n\t\tthis.initBoat();\n\n\t\t/*\n\t\tTODO - There's probably a better way to write this\n\t\tUse the passengers from the first state (states[0]) to initialize the drawings.\n\t\tEach passenger has a type. The type determines the filename of the drawing for the passenger.\n\t\tE.g - if passenger type is \"goat\", then the filename is \"goat.svg\" (if extension equals 'svg')\n\n\t\tNormally passengers don't have an unique ID.\n\t\tIf 2 passengers are on the same side and have the same type then they are indistinguishable\n\t\tThis code assigns each passenger a unique ID equal to its index in states[0].passengers and a drawing based on the type name\n\t\tThe ID and drawing are stored in a map.\n\t\t*/\n\n\t\t//states[0].data.passengers\n\n\t\tfor (let i = 0; i < states[0].data.passengers.length; i++) {\n\t\t\tlet currentPassenger = states[0].data.passengers[i];\n\t\t\tdrawings.set(i, this.draw.image(this.baseDir + this.specificDir + currentPassenger.type + extension).size(characterSideLength, characterSideLength))\n\t\t}\n\n\t\tfor (let state of states) {\n\t\t\tawait this.drawFrame(state);\n\n\t\t\t//0.5 second delay before each frame\n\t\t\tawait sleep(500)\n\t\t}\n\t}\n\n\tinitBoat() {\n\t\tboatSideLength = (characterSideLength * boatSideLengthInCharacters) + gap;\n\t\tboatYCoord = getCenterY(boatSideLength, baseHeight);\n\n\t\t//The boat's filename is hardcoded\n\t\t//Move the boat to the end of the left river bank\n\t\tboat = this.draw.image(this.baseDir + this.commonDir + 'raft.svg').size(boatSideLength, boatSideLength).move(leftBankXCoord + riverBankWidth, boatYCoord)\n\t}\n\n\tasync drawFrame(state: RiverState): Promise<void> {\n\n\t\t//the index of the current state\n\t\tlet i = states.indexOf(state);\n\n\n\t\tconst [leftBankIDs, rightBankIDs] = sortIntoLeftAndRightSides(state.data.passengers)\n\n\t\t//const leftBankIDs = [];\n\t\t//const rightBankIDs = [];\n\n\t\t/*\n\t\tIterate through the current state's passengers and sort the IDs based on which side a passenger is on.\n\t\tThis code works because for every state in the array states, the array passengers preserves its order.\n\t\tFor example - if a passenger was at index 0 in the first state, it will still be at index 0 in the tenth state.\n\t\t*/\n\t\t/*\n\t\tfor (let i = 0; i < state.data.passengers.length; i++) {\n\t\t\tlet currentPassenger = state.data.passengers[i];\n\t\t\tif (currentPassenger.side === 'left') {\n\t\t\t\tleftBankIDs.push(i)\n\t\t\t} else {\n\t\t\t\trightBankIDs.push(i)\n\t\t\t}\n\t\t}\n\t\t*/\n\n\t\t//Check if it's the first state because the first state doesn't require animation\n\t\tif (i === 0) {\n\t\t\tdrawRiverBank(leftBankXCoord, leftBankIDs);\n\t\t\tdrawRiverBank(rightBankXCoord, rightBankIDs);\n\t\t} else {\n\n\t\t\tlet showSuccess = false;\n\t\t\tlet throwFatalError = false;\n\n\t\t\tif (state.status === RiverStatuses.SuccessStatus) {\n\t\t\t\tshowSuccess = true\n\t\t\t} else if (state.status.severityLevel === SeverityLevel.FatalError) {\n\t\t\t\tthrowFatalError = true\n\t\t\t} else if (state.status.severityLevel === SeverityLevel.NonFatalError) {\n\t\t\t\tthis.addMessage('Warning: ' + state.status.event, 'warning')\n\t\t\t}\n\n\t\t\tlet moveDirection = state.data.boat.side;\n\n\t\t\t//Redraw the canvas in the direction of the movement - if the movement was from right to left ('left')\n\t\t\t//then redraw the right side first\n\t\t\tif (moveDirection === 'left') {\n\t\t\t\tdrawRiverBank(rightBankXCoord, rightBankIDs)\n\t\t\t} else {\n\t\t\t\tdrawRiverBank(leftBankXCoord, leftBankIDs)\n\t\t\t}\n\n\n\t\t\t//let movingPassengerIDs = [];\n\n\t\t\t//Get list of passengers that have moved by checking a passenger's side\n\t\t\t//in the previous state equals their side in the current state\n\t\t\tlet prevState = states[i - 1]\n\n\t\t\t/*\n\t\t\tfor (let j = 0; j < prevState.data.passengers.length; j++) {\n\t\t\t\tif (prevState.data.passengers[j].side !== state.data.passengers[j].side) {\n\t\t\t\t\tmovingPassengerIDs.push(j)\n\t\t\t\t}\n\t\t\t}\n\t\t\t*/\n\n\t\t\tlet movingPassengerIDs = getMovingCrossers(state.data.passengers, prevState.data.passengers)\n\n\t\t\tawait this.animateCrossing(movingPassengerIDs, moveDirection);\n\n\t\t\tif (moveDirection === Side.Left) {\n\t\t\t\tdrawRiverBank(leftBankXCoord, leftBankIDs)\n\t\t\t} else {\n\t\t\t\tdrawRiverBank(rightBankXCoord, rightBankIDs)\n\t\t\t}\n\n\t\t\tif (throwFatalError) {\n\t\t\t\tthis.displayFatalError(state.status.event, state.status.errorData!, state.data.passengers)\n\t\t\t} else if (showSuccess) {\n\t\t\t\tthis.addMessage(state.status.event, 'success')\n\t\t\t}\n\n\t\t}\n\t}\n\n\tdisplayFatalError(message: string, errorData: RiverErrorData, passengers: ReadonlyArray<Passenger>) {\n\n\t\tthis.replaceImage(errorData.oldType, errorData.newType, errorData.side, passengers)\n\n\t\t//let imageWidth = rightBankXCoord - riverBankWidth;\n\n\t\t//If custom error images are needed then put images in the path represented by \"baseDir + commonDir\"\n\t\t//and go to river-puzzle-setup.ts and change the error codes to the names of the images\n\t\t//this.draw.image(this.baseDir + this.commonDir + 'worried.svg').size(imageWidth, baseHeight).move(characterSideLength * maxColumns, 0);\n\n\t\tthis.addMessage(\"Error: \" + message)\n\t}\n\n\treplaceImage(oldtype: string, newtype: string, targetSide: Side, passengers: ReadonlyArray<Passenger>) {\n\n\t\tdrawings.forEach((drawing, key) => {\n\t\t\tlet src: string = drawing.src\n\t\t\tif (src) {\n\t\t\t\tif (passengers[key].side === targetSide) {\n\t\t\t\t\tif (src.split('/').pop()!.slice(0, -extension.length) === oldtype) {\n\t\t\t\t\t\tlet oldX = drawing.x()\n\t\t\t\t\t\tlet oldY = drawing.y()\n\t\t\t\t\t\tdrawing.remove()\n\t\t\t\t\t\tdrawing = this.draw.image(drawing.src.replace(oldtype + extension, newtype + extension)).size(characterSideLength, characterSideLength).move(oldX, oldY)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t}\n\n\tasync animateCrossing(IDs: ReadonlyArray<number>, direction: string): Promise<void> {\n\n\t\t//draw.group() allows animation of multiple images at once\n\t\tlet movingObjects = this.draw.group();\n\n\t\t//Don't redraw the boat at the end if no passengers moved\n\t\tlet refreshBoat = false;\n\t\tif (IDs.length > 0) {\n\t\t\tmovingObjects.add(boat);\n\t\t\trefreshBoat = true\n\t\t}\n\n\t\tconst yCoord = getCenterY(characterSideLength, baseHeight);\n\n\t\tif (direction === Side.Right) {\n\n\t\t\t//startXCoord is the endpoint of the left river bank\n\t\t\tconst startXCoord = leftBankXCoord + riverBankWidth;\n\t\t\tlet xCoord = startXCoord;\n\n\t\t\t//Add the drawings one by one\n\t\t\t//Each time a drawing is added, shift to the right by 1 character length + padding before adding another drawing\n\t\t\tfor (let id of IDs) {\n\t\t\t\tlet currentDrawing = drawings.get(id);\n\t\t\t\tcurrentDrawing!.move(xCoord, yCoord);\n\t\t\t\tmovingObjects.add(currentDrawing!);\n\t\t\t\txCoord += (characterSideLength + gap)\n\t\t\t}\n\n\t\t\tconst targetXCoord = rightBankXCoord - boatSideLength;\n\t\t\tconst xShift = targetXCoord - startXCoord;\n\n\t\t\tmovingObjects.animate(animationTime, '-', 0).move(xShift, 0);\n\t\t\tawait sleep(animationTime);\n\n\t\t\tmovingObjects.remove();\n\n\t\t\tif (refreshBoat) {\n\t\t\t\tboat = this.draw.image(this.baseDir + this.commonDir + 'raft.svg').size(boatSideLength, boatSideLength).y(boatYCoord).x(targetXCoord)\n\t\t\t}\n\t\t} else {\n\n\t\t\tlet xCoord = rightBankXCoord - characterSideLength;\n\n\t\t\t//Add the drawings one by one\n\t\t\t//Each time a drawing is added, shift to the left before adding another drawing\n\t\t\tfor (let id of IDs) {\n\t\t\t\tlet currentDrawing = drawings.get(id);\n\t\t\t\tcurrentDrawing!.move(xCoord, yCoord);\n\t\t\t\tmovingObjects.add(currentDrawing!);\n\t\t\t\txCoord -= (characterSideLength + gap)\n\t\t\t}\n\n\t\t\t//The end point of the animation - in absolute terms.\n\t\t\t//Equals the end point of the left river bank + the length of the boat\n\t\t\tconst targetXCoord = leftBankXCoord + riverBankWidth + boatSideLength;\n\n\t\t\t//Distance between end point of animation and start point of animation\n\t\t\t//Is negative because groups only accept relative coordinates\n\t\t\tconst xShift = -(rightBankXCoord - targetXCoord);\n\n\t\t\t//Animate objects and wait until the animation is finished\n\t\t\tmovingObjects.animate(animationTime, '-', 0).move(xShift, 0);\n\t\t\tawait sleep(animationTime);\n\n\t\t\t//remove the group and all images inside of it.\n\t\t\t//Without this it is impossible to move the images individually\n\t\t\tmovingObjects.remove();\n\n\t\t\t//Redraw the boat, if necessary.\n\t\t\tif (refreshBoat) {\n\t\t\t\tboat = this.draw.image(this.baseDir + this.commonDir + 'raft.svg').size(boatSideLength, boatSideLength).y(boatYCoord).x(leftBankXCoord + boatSideLength)\n\t\t\t}\n\t\t}\n\n\t\t//Redraw all the images inside the group.\n\t\tfor (let id of IDs) {\n\t\t\tdrawings.set(id, this.draw.image(this.baseDir + this.specificDir + states[0].data.passengers[id].type + extension).size(characterSideLength, characterSideLength))\n\t\t}\n\n\t}\n\n\n\tcalculateDimensions() {\n\n\t\t//Each character has a vertical and horizontal gap between every other character\n\t\tconst combinedVerticalGapLength = (gap * (maxCharactersInColumn - 1));\n\n\n\t\t//draw.native() returns the SVG element.\n\t\t//The simpler draw.node.clientHeight breaks on Firefox\n\t\t///draw.n\n\t\t[baseWidth, baseHeight] = getBaseDimensions(this.draw)\n\n\t\t//characterSideLength is the width and height of every character\n\t\t//because it is calculated based on the height of the SVG, the animation\n\t\t//will break if the SVG has a large height and a small width\n\t\tcharacterSideLength = Math.round((baseHeight - combinedVerticalGapLength) / maxCharactersInColumn);\n\n\n\t\tleftBankXCoord = 0;\n\n\t\t/*\n\t\tHere's an explanatory drawing for the left river bank. The right river bank is the same, except you reflect the drawing across the y-axis.\n\t\tCharacter1 gap Character3 gap (... repeat horizontally until maxColumns is reached)\n\t\tCharacter2 gap Character4 gap\n\t\t-----------------------------  = total width of a river bank\n\t\t(repeat vertically until maxCharactersInColumn is reached)\n\t\t*/\n\t\trightBankXCoord = baseWidth - (maxColumns * characterSideLength) - gap\n\t}\n\n\n\tinitBackground() {\n\n\t\triverBankWidth = (characterSideLength * maxColumns) + gap;\n\n\t\tlet leftbank = this.draw.rect(riverBankWidth, baseHeight).move(0, 0).fill(grassColor);\n\n\t\tleftbank.clone().x(rightBankXCoord);\n\n\t\t//draws the river\n\t\tthis.draw.rect(baseWidth - riverBankWidth * 2, baseHeight).move(riverBankWidth, 0).fill(waterColor);\n\n\t\t//The parent element has padding - as such a gradient on the parent element\n\t\t// is needed to give the illustion that the SVG takes up the entire space of the parent element\n\t\tlet gradientGreenLeft = riverBankWidth + parseInt(window.getComputedStyle(this.draw.node.parentElement!, null).getPropertyValue('padding-left').replace(/px/g, ''));\n\t\tlet gradientGreenRight = this.draw.node.parentElement!.offsetWidth - gradientGreenLeft;\n\n\t\tthis.draw.node.parentElement!.style.background = \"linear-gradient(to right, \"\n\t\t\t+ grassColor + \" 0%, \" + grassColor + \" \" + gradientGreenLeft + \"px, \"\n\t\t\t+ waterColor + \" \" + gradientGreenLeft + \"px, \"\n\t\t\t+ waterColor + \" \" + gradientGreenRight + \"px, \"\n\t\t\t+ grassColor + \" \" + gradientGreenRight + \"px, \" + grassColor + \" 100%)\"\n\n\t}\n\n\n}\n\nfunction drawRiverBank(xCoord: number, IDs: ReadonlyArray<number>) {\n\n\n\tlet totalCharactersDrawn = 0;\n\tlet currentXCoord = xCoord;\n\n\tcolumnLoop: for (let currentColumn = 0; currentColumn < maxColumns; currentColumn++) {\n\n\t\tlet currentYCoord = 0;\n\n\t\tfor (let currentRow = 0; currentRow < maxCharactersInColumn; currentRow++) {\n\t\t\tif (totalCharactersDrawn === IDs.length) {\n\t\t\t\tbreak columnLoop;\n\t\t\t}\n\n\t\t\tdrawings.get(IDs[totalCharactersDrawn])!.move(currentXCoord, currentYCoord);\n\n\t\t\tcurrentYCoord += (characterSideLength + gap);\n\t\t\ttotalCharactersDrawn++;\n\t\t}\n\t\tcurrentXCoord += characterSideLength;\n\t}\n\n}\n\n\n\n\n","import { codeErrorAlert } from '../ui/alerts'\n//@ts-ignore - no module defs for JS file\nimport * as MessageDisplay from '../ui/message-view'\n\nimport { Animator } from './base-animator'\n\n\nclass TutorialData {\n\n    //static riverCrossingBaseDir = \"./assets/river-crossing/\";\n\n    constructor(public objective: string, public images: string[], public rules: string[], public code: string[], public active = true) { }\n\n}\n\nabstract class PuzzleSetup {\n\n    async endCode(runtimeError: Error) {\n\n        let animator = this.createAnimator()\n        await animator.animate()\n\n        if (runtimeError !== undefined) {\n            let lineNum: number\n\n            let extractedlineNum = /<anonymous>:(\\d+)/.exec(JSON.stringify(runtimeError, Object.getOwnPropertyNames(runtimeError)));\n\n            //@ts-ignore Error has no property lineNumber (lineNumber is a non standard FF field)\n            if (runtimeError.lineNumber !== undefined) {\n                //@ts-ignore Same as previous line\n                lineNum = runtimeError.lineNumber - 2\n            } else if (extractedlineNum !== null) {\n                lineNum = parseInt(extractedlineNum[1]) - 2\n            } else {\n                codeErrorAlert()\n            }\n\n            //@ts-ignore - ignore lineNum used before initialized (already know that)\n            if (lineNum !== undefined) {\n                MessageDisplay.addMessage(\"Exception at line \" + lineNum + \": \" + '\"' + runtimeError.message + '\"')\n            }\n        }\n\n    }\n\n    setupCode: () => void\n\n    public readonly abstract __environment__: Object\n\n    abstract createAnimator(): Animator\n\n    protected constructor(specificSetupCode: Function, public readonly tutorialData: TutorialData) {\n\n        this.setupCode = () => {\n            MessageDisplay.clearMessages()\n            specificSetupCode()\n        }\n    }\n}\n\nabstract class StandardSetup extends PuzzleSetup {\n\n    abstract animatorConstructor: new (addMessage: (message: string, type?: string) => void, assetsDir: string) => Animator\n\n    createAnimator() {\n        return new this.animatorConstructor(MessageDisplay.addMessage, this.assetsDir)\n    }\n\n    constructor(public readonly assetsDir: string, specificSetupCode: Function, tutorialData: TutorialData) {\n        super(specificSetupCode, tutorialData)\n    }\n\n}\n\nimport { giveTorch, crossBridge, initGhoulPuzzle } from './crossing-puzzles/bridge-setup'\nimport { BridgeAnimator } from './crossing-puzzles/bridge-animator'\n\nclass BridgeSetup extends StandardSetup {\n    __environment__ = { giveTorch: giveTorch, crossBridge: crossBridge }\n\n    animatorConstructor = BridgeAnimator\n\n    constructor(specificSetupCode: Function, assetsDir: string, tutorialData: TutorialData) {\n        super(assetsDir, specificSetupCode, tutorialData)\n        this.tutorialData.images = this.tutorialData.images.map(image => this.assetsDir + image)\n    }\n\n}\n``\n\nimport { initGoatPuzzle, initHusbandPuzzle, initSoldierPuzzle, initVampirePuzzle, moveBoat } from './crossing-puzzles/river-setup'\nimport { RiverAnimator } from './crossing-puzzles/river-animator';\n\nclass RiverSetup extends StandardSetup {\n\n    __environment__ = { moveBoat: moveBoat }\n\n    animatorConstructor = RiverAnimator\n\n    constructor(specificSetupCode: Function, assetsDir: string, tutorialData: TutorialData) {\n        super(assetsDir, specificSetupCode, tutorialData)\n        this.tutorialData.images = this.tutorialData.images.map(image => './assets/river-crossing/' + this.assetsDir + image)\n    }\n}\n\nlet goatCabbageWolfDir = \"goat-apple-wolf/\";\n\nexport const goatCabbageWolf = new RiverSetup(\n    () => {\n        let [goat, apple, wolf, farmer] = initGoatPuzzle();\n        Object.assign(goatCabbageWolf.__environment__, { goat, apple, wolf, farmer })\n    },\n    goatCabbageWolfDir,\n    new TutorialData(\"Get the wolf, goat, farmer, and apple to the right side of the river using the boat.\", [\"wolf.svg\", \"goat.svg\", \"farmer.svg\", \"apple.svg\"], [\"The wolf cannot be left alone with the goat.\",\n        \"The goat cannot be left alone with the apple.\",\n        \"Only the farmer can row the boat.\",\n        \"The boat can hold up to 2 objects.\"],\n        [\"<p><code>moveBoat</code> is a function that moves the boat to the opposite side of the river. It accepts any number of the following objects: <code>wolf</code>, <code>goat</code>,<code>apple</code>, or <code>farmer</code>.\" +\n            \" An example use would be <code>moveBoat(farmer, goat)</code>.</p>\"]));\n\nlet vampirePriestDir = \"vampire-priest/\";\n\nexport const vampirePriest = new RiverSetup(\n    () => {\n        let [vampires, priests] = initVampirePuzzle();\n        Object.assign(vampirePriest.__environment__, { vampires, priests })\n    },\n    vampirePriestDir,\n    new TutorialData(\"Get the priests and vampires to the other side of the river using the boat.\", [\"priest.svg\", \"vampire.svg\"], [\"The boat can hold a maximum of 2 people.\", \"The number of vampires cannot exceed the number of priests on either side of the river.\"],\n        [\"<p><code>priests</code> and <code>vampires</code> are arrays that contain 3 vampire and priest objects each. <code>priests[0]</code> and <code>vampires[0]</code> are the first priest and vampire respectively. <code>priests[1]</code> and <code>vampires[1]</code> are the second priest and vampire respectively. Repeat for all priests and vampires.</p>\",\n            \"<p><code>moveBoat</code> is a function that accepts any number of priest and vampire objects. An example usage would be <code>moveBoat(priests[0], vampires[0])</code> or <code>moveBoat(vampires[0], vampires[1])</code>.</p>\"]));\n\nlet soldierBoyDir = \"soldier-boy/\";\n\nexport const soldierBoy = new RiverSetup(\n    () => {\n        let [soldiers, boys] = initSoldierPuzzle()\n        Object.assign(soldierBoy.__environment__, { soldiers, boys })\n    },\n    soldierBoyDir,\n    new TutorialData(\"Get the soldiers and boys to the other side of the river using the boat.\", [\"soldier.svg\", \"boy.svg\"], [\"The boat can carry 2 boys, a solder and a boy, but not 2 soldiers.\"],\n        [\"<p><code>soldiers</code> and <code>boys</code> are arrays that contain 6 soldiers and 2 boys respectively. <code>soldiers[0]</code> and <code>boys[0]</code> are the first soldier and boy respectively. <code>soldiers[1]</code> and <code>boys[1]</code> are the second soldier and boy respectively. Repeat for all remaining soldiers.</p>\",\n            \"<p><code>moveBoat</code> is a function that accepts any number of soldier and boy objects. An example usage would be <code>moveBoat(soldiers[0], boys[0])</code> or <code>moveBoat(soldiers[0], soldiers[1])</code>.</p>\"])\n);\n\nlet husbandWifeDir = \"husband-wife/\";\n\nexport const husbandWife = new RiverSetup(\n    () => {\n        let [Bob, Bob_Wife, Charlie, Charlie_Wife] = initHusbandPuzzle()\n        Object.assign(husbandWife.__environment__, { Bob, Bob_Wife, Charlie, Charlie_Wife })\n    },\n    husbandWifeDir,\n    new TutorialData(\"Get the husbands and wives to the other side of the river using the boat.\",\n        [\"Bob.svg\", \"Bob_Wife.svg\", \"Charlie.svg\", \"Charlie_Wife.svg\"],\n        [\"Charlie cannot be left alone with Bob's wife.\",\n            \"Bob cannot be left alone with Charlie's Wife.\",\n            \"The boat can hold up to 2 people.\"],\n        [\"<p><code>moveBoat</code> is a function that moves the boat to the opposite side of the river. It accepts any number of the following objects: <code>Bob</code>, <code>Bob_Wife</code>,<code>Charlie</code>, or <code>Charlie_Wife</code>.\" +\n            \" An example use would be <code>moveBoat(Bob, Charlie_Wife)</code>.</p>\"]))\n\nlet ghoulDir = \"./assets/bridge-crossing/ghoul-adventurer/\";\n\nexport const ghoul = new BridgeSetup(\n    () => {\n        let [Alice, Bob, Charlie, Doris] = initGhoulPuzzle()\n        Object.assign(ghoul.__environment__, { Alice, Bob, Charlie, Doris })\n    },\n    ghoulDir,\n    new TutorialData(\"Get all four adventurers to the other side of the bridge.\",\n        [\"Alice.svg\", \"Bob.svg\", \"Charlie.svg\", \"Doris.svg\"],\n        [\"\"],\n        [])\n)\n\n","exports.initModal = function(data) {\n    new Vue({\n        el:\"#vue-app-modal\",\n        data: data,\n        methods: {\n            continueToPuzzle: function() {\n                this.active = false\n            },\n\n            returnToMenu: function() {\n                window.history.back()\n            }\n        }\n    })\n};\n\n\n\n","//Required for support of async/await on older browsers\nimport 'regenerator-runtime/runtime'\nimport { codeErrorAlert } from './ui/alerts'\n\n//Setup Ace Editor\nlet editor = ace.edit('editor');\neditor.setTheme(\"ace/theme/monokai\");\neditor.session.setMode(\"ace/mode/javascript\");\neditor.setShowPrintMargin(false);\neditor.getSession().setUseWrapMode(true);\neditor.setFontSize(20)\n\nimport { goatCabbageWolf, vampirePriest, soldierBoy, husbandWife, ghoul } from \"./puzzles/puzzle-manager\";\n\nlet puzzles = new Map();\npuzzles.set(\"Animals and Vegetables\", goatCabbageWolf);\npuzzles.set(\"Priests and Vampires\", vampirePriest);\npuzzles.set(\"Soldiers and Boys\", soldierBoy);\npuzzles.set(\"Husbands and Wives\", husbandWife);\npuzzles.set(\"Ghouls and Adventurers\", ghoul)\n\n//set current puzzle\nlet currentPuzzle = puzzles.get(sessionStorage.getItem('puzzleID'));\n\n//Setup Modal Controller\nlet modalController = require('./ui/modal-controller');\nmodalController.initModal(currentPuzzle.tutorialData);\n\n\nlet runButtonVueManager = new Vue({\n    el: \"#vue-run-button\",\n    data: {\n        runningCode: false,\n    },\n    methods: {\n        runUserCode: async function () {\n            this.runningCode = true\n\n            for (let annotation of editor.getSession().getAnnotations()) {\n                if (annotation.type === 'warning' || annotation.type === 'error') {\n                    codeErrorAlert()\n                    this.runningCode = false\n                    return;\n                }\n            }\n\n            currentPuzzle.setupCode();\n\n            try {\n                (new Function(...Object.keys(currentPuzzle.__environment__), editor.getValue())(...Object.values(currentPuzzle.__environment__)));\n\n                await currentPuzzle.endCode()\n            } catch (error) {\n                await currentPuzzle.endCode(error)\n            }\n\n            this.runningCode = false\n        }\n    }\n})\n\nrunButtonVueManager.runUserCode()\n\n\n\n\n\n"]}